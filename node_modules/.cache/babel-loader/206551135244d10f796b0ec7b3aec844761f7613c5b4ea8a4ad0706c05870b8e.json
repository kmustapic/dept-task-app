{"ast":null,"code":"//src/util\nexport async function doRequest({\n  url,\n  method,\n  body,\n  token,\n  setMessage\n}) {\n  setMessage({\n    type: '',\n    text: ''\n  });\n  try {\n    const response = await fetch(url, {\n      method,\n      headers: {\n        'Content-Type': 'application/json',\n        ...(token && {\n          Authorization: `Bearer ${token}`\n        })\n      },\n      body: body ? JSON.stringify(body) : undefined\n    });\n    const data = await response.json();\n    if (!response.ok) {\n      const msg = data.message || 'An error occured.';\n      setMessage({\n        type: 'error',\n        text: msg\n      });\n      return null;\n    }\n    return data;\n  } catch (err) {\n    setMessage({\n      type: 'error',\n      text: 'Error in communication with the server.'\n    });\n    return null;\n  }\n}","map":{"version":3,"names":["doRequest","url","method","body","token","setMessage","type","text","response","fetch","headers","Authorization","JSON","stringify","undefined","data","json","ok","msg","message","err"],"sources":["C:/Users/Korisnik/Desktop/Kristina/TEMP FAKS/dept-task-app/src/utils/api.js"],"sourcesContent":["//src/util\r\nexport async function doRequest({url, method, body, token, setMessage }){\r\n    setMessage({type:'', text:''});\r\n\r\n    try {\r\n        const response = await fetch(url, {\r\n            method,\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                ...(token && {Authorization: `Bearer ${token}`}),\r\n            },\r\n            body: body ? JSON.stringify(body) : undefined,\r\n        });\r\n        const data = await response.json();\r\n\r\n        if(!response.ok) {\r\n            const msg = data.message || 'An error occured.';\r\n            setMessage({type:'error', text:msg});\r\n            return null;\r\n        }\r\n        return data;\r\n    }\r\n    catch (err) {\r\n        setMessage({type:'error', text:'Error in communication with the server.'});\r\n        return null;\r\n    }\r\n}"],"mappings":"AAAA;AACA,OAAO,eAAeA,SAASA,CAAC;EAACC,GAAG;EAAEC,MAAM;EAAEC,IAAI;EAAEC,KAAK;EAAEC;AAAW,CAAC,EAAC;EACpEA,UAAU,CAAC;IAACC,IAAI,EAAC,EAAE;IAAEC,IAAI,EAAC;EAAE,CAAC,CAAC;EAE9B,IAAI;IACA,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAACR,GAAG,EAAE;MAC9BC,MAAM;MACNQ,OAAO,EAAE;QACL,cAAc,EAAE,kBAAkB;QAClC,IAAIN,KAAK,IAAI;UAACO,aAAa,EAAE,UAAUP,KAAK;QAAE,CAAC;MACnD,CAAC;MACDD,IAAI,EAAEA,IAAI,GAAGS,IAAI,CAACC,SAAS,CAACV,IAAI,CAAC,GAAGW;IACxC,CAAC,CAAC;IACF,MAAMC,IAAI,GAAG,MAAMP,QAAQ,CAACQ,IAAI,CAAC,CAAC;IAElC,IAAG,CAACR,QAAQ,CAACS,EAAE,EAAE;MACb,MAAMC,GAAG,GAAGH,IAAI,CAACI,OAAO,IAAI,mBAAmB;MAC/Cd,UAAU,CAAC;QAACC,IAAI,EAAC,OAAO;QAAEC,IAAI,EAACW;MAAG,CAAC,CAAC;MACpC,OAAO,IAAI;IACf;IACA,OAAOH,IAAI;EACf,CAAC,CACD,OAAOK,GAAG,EAAE;IACRf,UAAU,CAAC;MAACC,IAAI,EAAC,OAAO;MAAEC,IAAI,EAAC;IAAyC,CAAC,CAAC;IAC1E,OAAO,IAAI;EACf;AACJ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}